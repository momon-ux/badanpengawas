<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<title>SENARAI SEMAK PELANTIKAN JAWATAN MURID</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:Segoe UI,Arial;background:linear-gradient(135deg,#e0f2fe,#f8fafc);margin:0;padding:20px}
h1,h2{text-align:center}
.header{background:linear-gradient(90deg,#2563eb,#38bdf8);color:#fff;padding:20px;border-radius:16px;max-width:1000px;margin:auto}
.card{background:#fff;border-radius:16px;padding:25px;margin:20px auto;max-width:900px;box-shadow:0 8px 20px rgba(0,0,0,.12)}
label{font-weight:600;margin-top:12px;display:block}
select,input{width:100%;padding:10px;border-radius:10px;border:1px solid #cbd5f5;margin-top:5px}
button{margin-top:15px;padding:10px 20px;border:none;border-radius:999px;background:#2563eb;color:#fff;font-weight:bold;cursor:pointer}
table{width:100%;border-collapse:collapse;margin-top:20px}
th,td{padding:10px;text-align:center}
th{background:#2563eb;color:#fff}
tr:nth-child(even){background:#f1f5f9}
.action{font-size:12px;padding:5px 10px;border-radius:6px;border:none;color:#fff;cursor:pointer}
.edit{background:#f59e0b}
.delete{background:#ef4444}
footer{text-align:center;margin-top:40px;font-style:italic}
</style>
</head>

<body>

<div class="header">
<h1>SENARAI SEMAKAN PELANTIKAN JAWATAN MURID</h1>
<h2>SEKOLAH KEBANGSAAN RANGGU</h2>
<h2>PETI SURAT 842, 91008 TAWAU, SABAH</h2>
<p style="text-align:center">Sesi Persekolahan 2026</p>
</div>

<div class="card">
<h2>Borang Pengisian</h2>

<label>Tahun</label>
<select id="tahun">
<option>Tahun 1</option>
<option>Tahun 2</option>
<option>Tahun 3</option>
</select>

<label>Kelas</label>
<select id="kelas">
<option>ILTIZAM</option>
<option>JAYYID</option>
<option>KHOIR</option>
<option>MUMTAZ</option>
</select>

<label>Guru Kelas</label>
<input id="guru" placeholder="Nama guru kelas">

<label>Nama Murid</label>
<input id="nama" placeholder="Nama penuh murid">

<label>Jawatan</label>
<select id="jawatan">
<option value="">-- Pilih Jawatan --</option>
<option>Ketua Kelas</option>
<option>Penolong Ketua Kelas</option>
<option>Pengawas Sekolah</option>
<option>Pengawas Pusat Sumber</option>
<option>Pengawas PPDA</option>
<option>Pengawas SPBT</option>
<option>Pembimbing Rakan Sebaya</option>
</select>

<button onclick="simpan()">Simpan Data</button>
</div>

<div class="card">
<h2>Senarai Murid</h2>

<table id="jadual">
<tr>
<th>Tahun</th>
<th>Kelas</th>
<th>Guru</th>
<th>Nama Murid</th>
<th>Jawatan</th>
<th>Tindakan</th>
</tr>
</table>

<button onclick="muatTurunCSV()">⬇️ Muat Turun CSV</button>
</div>

<script>
let dataMurid = JSON.parse(localStorage.getItem("DATA_MURID")) || [];
let editIndex = null;

function paparJadual(){
  const jadual = document.getElementById("jadual");
  jadual.innerHTML = `
  <tr>
    <th>Tahun</th><th>Kelas</th><th>Guru</th>
    <th>Nama Murid</th><th>Jawatan</th><th>Tindakan</th>
  </tr>`;
  dataMurid.forEach((d,i)=>{
    const r = jadual.insertRow();
    d.forEach(v=>r.insertCell().innerText=v);
    r.insertCell().innerHTML =
      `<button class="action edit" onclick="edit(${i})">Edit</button>
       <button class="action delete" onclick="hapus(${i})">Hapus</button>`;
  });
}

function simpan(){
  const tahun=tahunEl.value, kelas=kelasEl.value;
  const guru=guruEl.value||"Belum Diisi";
  const nama=namaEl.value.trim();
  const jawatan=jawatanEl.value;

  if(!nama||!jawatan){alert("Sila lengkapkan maklumat");return;}

  const rekod=[tahun,kelas,guru,nama,jawatan];

  if(editIndex!==null){
    dataMurid[editIndex]=rekod;
    editIndex=null;
  }else{
    dataMurid.push(rekod);
  }

  localStorage.setItem("DATA_MURID",JSON.stringify(dataMurid));
  namaEl.value=""; guruEl.value=""; jawatanEl.value="";
  paparJadual();
}

function edit(i){
  const d=dataMurid[i];
  tahunEl.value=d[0]; kelasEl.value=d[1];
  guruEl.value=d[2]=="Belum Diisi"?"":d[2];
  namaEl.value=d[3]; jawatanEl.value=d[4];
  editIndex=i;
}

function hapus(i){
  if(confirm("Hapus data ini?")){
    dataMurid.splice(i,1);
    localStorage.setItem("DATA_MURID",JSON.stringify(dataMurid));
    paparJadual();
  }
}

function muatTurunCSV(){
  let csv="Tahun,Kelas,Guru,Nama Murid,Jawatan\n";
  dataMurid.forEach(d=>csv+=`"${d.join('","')}"\n`);
  const blob=new Blob(["\uFEFF"+csv],{type:"text/csv"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="Senarai_Jawatan_Murid_2026.csv";
  a.click();
}

const tahunEl=document.getElementById("tahun");
const kelasEl=document.getElementById("kelas");
const guruEl=document.getElementById("guru");
const namaEl=document.getElementById("nama");
const jawatanEl=document.getElementById("jawatan");

paparJadual();
</script>

<footer>Dibangunkan oleh Cikgu Mohammad Fikrey Bin Abdul Gapar<footer>
<footer>UNIT DISPLIN SESI PETANG</footer>

</body>
</html>

